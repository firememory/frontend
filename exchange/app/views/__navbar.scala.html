@(index: Int, fix: Boolean = false)(implicit session: Session, lang: Lang)
@import utils.Constant._
<nav id="navbar" class="navbar navbar-default @if(fix) {navbar-fixed-top} else {navbar-static-top}" ng-controller="NaviCtrl">
    <div class="container navbar-inner">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#cp-navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"></a>
        </div>
              @session.get("uid") match {
                case Some(uid: String) => {
                    <span ng-show="false" ng-init="isLogin=true"></span>
                    <span ng-show="false" ng-init="uid=@uid"></span>
                    <span ng-show="false" ng-init="username='@(session.get("username"))'"></span>
                }
                case None => {
                    <span ng-show="false" ng-init="isLogin=false"></span>
                }
            }
        <div class="collapse navbar-collapse" id="cp-navbar">
            <ul class="nav navbar-nav navbar-right">
                @if(index==0){<li class="active">} else {<li>}
                    <a href="/">@Messages("nav.home")</a>
                </li>
                  <li  ng-show="isLogin"  class="@if(index==1){active}">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">@Messages("nav.trade") <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        @for(market <- markets) {
                        <li><a href="/trade#/@market">@market</a></li>
                        }
                    </ul>

                </li>
                <li ng-show="isLogin" class="@if(index==2) {active}">
                    <a href="/account">@Messages("nav.account")</a>
                </li>
                <li class="@if(index==3){active}">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">@Messages("nav.market") <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        @for(market <- markets) {
                        <li><a href="/market#/@market">@market</a></li>
                        }
                    </ul>
                </li>
                <li class="@if(index==4){active}">
                    <a href="/open#/about/@(lang.code)">@Messages("nav.open")</a>
                </li>

                <li ng-show="isLogin">
                    <a class="user" href="/user/{{uid}}"><span><i class="fa fa-user"></i><span ng-bind="username"></span></span></a>
                </li>
                <li ng-show="isLogin">
                    <a href="/account/logout" class="">@Messages("nav.logout")</a>
                </li>

                <li ng-show="!isLogin">
                    <!-- <a href="#" class="" ng-click="openLoginWindow(0)">@Messages("nav.login")</a> -->
                    <a href="/login" class="">@Messages("nav.login")</a>
                </li>
                <li ng-show="!isLogin">
                <a href="/register" class="">@Messages("nav.register")</a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="container" ng-controller="AlertCtrl">
    <alert ng-repeat="alert in alerts" type="{{alert.ntype.toLowerCase()}}" close="closeAlert($index)"><strong ng-bind="alert.title"></strong> <span ng-bind="alert.content"></span></alert>
</div>
